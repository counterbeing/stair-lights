#!/usr/bin/env bash
set -e

# PlatformIO deployment script for stair-lights
# Usage: ./bin/deploy [environment]

ENVIRONMENT=${1:-default}

echo "ðŸš€ Deploying stair-lights to ESP32..."
echo "Environment: $ENVIRONMENT"
echo

# Build and upload
if [ "$ENVIRONMENT" = "default" ]; then
    echo "ðŸ“¦ Building and uploading..."
    platformio run --target upload
else
    echo "ðŸ“¦ Building and uploading to environment: $ENVIRONMENT"
    platformio run --environment "$ENVIRONMENT" --target upload
fi

echo
echo "âœ… Deployment complete!"
echo "ðŸ’¡ Monitor serial output with: platformio device monitor"